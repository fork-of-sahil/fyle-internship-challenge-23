<div class="bg-gray-100 fixed top-0 w-full" style="z-index: 3;">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <div class="flex-shrink-0">
                <span class="text-black font-bold text-lg">Fyle Internship Assignment</span>
            </div>
            <div class="flex">
                <div class="relative mr-4">
                    <input type="text" [(ngModel)]="username" (keyup.enter)="onSearch(username)"
                        class="bg-white text-gray-900 rounded-md py-2 px-4 pr-10 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-gray-600 w-64"
                        placeholder="Search">
                </div>
                <div class="relative">
                    <button (click)="onSearch(username)"
                        class="bg-blue-500 text-white rounded-md py-2 px-4">Search</button>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-container *ngIf="loadingState === false && isSearched === true">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-20 mb-10">
        <div class="flex flex-col gap-4">
            <div class="bg-white rounded-lg p-4 text-black max-h-96 overflow-y-auto">
                <h2 class="text-xl font-bold mb-4">Profile</h2>
                <!-- Top Column -->
                <div class="flex flex-col md:flex-row">
                    <div class="md:w-1/3">
                        <img [src]="user?.data?.avatar_url" alt="Profile Image"
                            class="w-32 h-32 rounded-full mx-auto bg-gray-200">
                    </div>
                    <div class="md:w-2/3">
                        <h2 class="text-xl font-bold mb-2">{{ user.data.name }}</h2>
                        <p class="text-gray-600 mb-4">{{ user.data.bio }}</p>
                        <p class="text-gray-600 mb-4">Location: {{ user.data.location }}</p>
                        <div class="flex space-x-4">
                            <a *ngIf="user.data.twitter_username !== null"
                                [href]="'https://twitter.com/'+user?.data?.twitter_username"
                                class="text-blue-500 hover:text-blue-700">Twitter</a>
                            <a [href]="user?.data?.html_url" class="text-blue-500 hover:text-blue-700">GitHub</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid grid-cols-1 gap-4">
                <!-- Bottom Column -->
                <div class="bg-white rounded-lg p-4 text-black">
                    <h2 class="text-xl font-bold mb-4">Repositories</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div *ngFor="let repo of repos" class="bg-gray-200 rounded-lg p-4 text-black">
                            <h3 class="text-lg font-bold mb-2">{{ repo.name }}</h3>
                            <p class="text-gray-600 mb-2">{{ repo.description }}</p>
                            <div class="flex flex-wrap mt-2">
                                <div *ngFor="let language of repo.languages"
                                    class="p-2 bg-gray-300 text-gray-700 rounded mr-2 mb-2">
                                    {{ language }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-end mt-4 space-x-2">
                        <button (click)="goToFirstPage()" [disabled]="currentPage === 1"
                            class="px-3 py-1 rounded text-blue-500 bg-gray-300 disabled:bg-gray-200"
                            [ngClass]="{'bg-gray-300': currentPage !== 1, 'bg-gray-200': currentPage === 1}">First</button>
                        <button (click)="goToPreviousPage()" [disabled]="currentPage === 1"
                            class="px-3 py-1 rounded text-blue-500 bg-gray-300 disabled:bg-gray-200"
                            [ngClass]="{'bg-gray-300': currentPage !== 1, 'bg-gray-200': currentPage === 1}">Previous</button>
                        <button (click)="goToNextPage()"
                            class="px-3 py-1 rounded text-blue-500 bg-gray-300 disabled:bg-gray-200">Next</button>
                        <!-- <button (click)="goToLastPage()" class="px-3 py-1 rounded text-blue-500 bg-gray-300 disabled:bg-gray-200" >Last</button> -->
                    </div>

                </div>
            </div>
        </div>
    </div>
</ng-container>

<ng-container *ngIf="loadingState === true">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-20 mb-10">
        <div class="flex flex-col gap-4">
            <div class="rounded-lg p-4 text-black max-h-96 overflow-y-auto">
                <h2 class="text-xl font-bold mb-4">Profile</h2>
                <!-- Top Column -->
                <div class="flex flex-col md:flex-row">
                    <div class="md:w-1/3 flex justify-center">
                        <ngx-skeleton-loader
                            [theme]='{"borderRadius":"9999px","width":"8rem","height":"8rem","backgroundColor":"#E5E7EB"}'></ngx-skeleton-loader>
                    </div>
                    <div class="md:w-2/3">
                        <ngx-skeleton-loader count="4"
                            [theme]='{"display":"flex","width": "24rem","margin-bottom":"1rem" ,"backgroundColor":"#E5E7EB"}'></ngx-skeleton-loader>
                    </div>
                </div>
            </div>
            <div class="grid grid-cols-1 gap-4">
                <!-- Bottom Column -->
                <div class="rounded-lg p-4 text-black">
                    <h2 class="text-xl font-bold mb-4">Repositories</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div *ngFor="let repo of repos" class="bg-gray-300 rounded-lg p-4 text-black">
                            <ngx-skeleton-loader count="1"
                                [theme]='{"display":"flex","width": "16rem","margin-bottom":"1rem" ,"backgroundColor":"#E5E7EB"}'></ngx-skeleton-loader>
                            <ngx-skeleton-loader count="1"
                                [theme]='{"display":"flex","width": "20rem","height":"5rem","margin-bottom":"1rem" ,"backgroundColor":"#E5E7EB"}'></ngx-skeleton-loader>
                            <div class="flex flex-wrap mt-2">
                                <div *ngFor="let language of repo.languages" class="text-gray-700 rounded mr-2 mb-2">
                                    <ngx-skeleton-loader count="1"
                                        [theme]='{"display":"flex","width": "8rem","height":"2rem","backgroundColor":"#E5E7EB"}'></ngx-skeleton-loader>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-container>